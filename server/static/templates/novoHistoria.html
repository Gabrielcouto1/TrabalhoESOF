<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title class="title">Cadastrar Hist√≥ria</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/novoProduto.css') }}">  
</head>
<body>
    <div id="profile">
        <img src="{{ url_for('static', filename='assets/foto.png') }}" alt="Foto do perfil">
    </div>
    <div id="greeting">
        Ol√°, Ana!üòä
    </div>

    <form action="/cadastrar_historia" method="POST">
        <label for="titulo">T√≠tulo:</label><br>
        <input type="text" id="titulo" name="titulo" required><br><br>

        <label for="descricao">Descri√ß√£o:</label><br>
        <textarea id="descricao" name="descricao" rows="4" cols="50" required></textarea><br><br>

        <label for="story_points">Valor do Story Points:</label><br>
        <input type="text" id="story_points" name="story_points" required><br><br>

        <label for="release">Release:</label><br>
        <input type="text" id="release" name="release" required><br><br>

        <label for="iteracao">Itera√ß√£o (Sprint) da release:</label><br>
        <input type="text" id="iteracao" name="iteracao" required><br><br>

        <input type="submit" value="Cadastrar Hist√≥ria">
    </form>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('form').addEventListener('submit', function(event) {
                event.preventDefault(); 
    
                var formData = new FormData(this);
    
                var xhr = new XMLHttpRequest();
    
                xhr.open('POST', '/novoHistoria', true);
    
                xhr.onload = function() {
                    if (xhr.status === 200) {
                        window.location.href = '/xp';
                    } else {
                        alert('Error: ' + xhr.status);
                    }
                };
    
                xhr.send(formData);
            });
        });
    </script>
</body>
</html>
